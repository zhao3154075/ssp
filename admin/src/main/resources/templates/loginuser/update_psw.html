<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/web/thymeleaf/layout"
      layout:decorate="~{base_form}">
<body>
<th:block layout:fragment="form_title">
    <li class="active">
        <strong>修改密码</strong>
    </li>
</th:block>
<th:block layout:fragment="form_content">
    <form th:method="put" action="loginuser/updatePsw" class="form-horizontal form-wizard form validate">
        <div class="form-group">
            <label class="col-sm-1 control-label">
                旧密码
            </label>

            <div class="col-sm-4">
                <input type="password" name="oldPsw" maxlength="30" required
                       class="form-control" autocomplete="off">
            </div>
        </div>
        <div class="form-group">
            <label class="col-sm-1 control-label">
                新密码
            </label>

            <div class="col-sm-4">
                <input type="password" name="psw" maxlength="30" required
                       class="form-control" autocomplete="off">
            </div>
        </div>
        <div class="form-group">
            <label class="col-sm-1 control-label">
                确认新密码
            </label>

            <div class="col-sm-4">
                <input type="password" name="repsw" maxlength="30" required
                       class="form-control" autocomplete="off">
            </div>
        </div>
        <div class="form-group" >
            <label class="col-sm-1 control-label">
            </label>

            <div class="col-sm-10">
                <button type="submit"
                        class="ladda-button btn btn-primary">提交</button>
            </div>
        </div>
    </form>
    <script>
        $(function(){
            var errorMsg="[[${msg}]]";
            if(errorMsg=="0"){
                alert("原密码错误");
            }else if(errorMsg=="1"){
                alert("修改成功");
            }
            $("form").submit(function(){
                if($("[name=psw]").val()!=$("[name=repsw]").val()){
                    alert("两次密码不一致");
                    return false;
                }
                return true;
            });
        });
    </script>
</th:block>
</body>
</html>